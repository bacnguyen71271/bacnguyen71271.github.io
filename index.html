<!DOCTYPE html>
<html>

<head>
    <title>Truy tìm kho báu - HOCMAI Tiểu học</title>
    <meta property="og:title" content="Truy tìm kho báu - HOCMAI Tiểu học" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://tieuhoc.hocmai.vn/truy-tim-kho-bau/" />
    <meta property="og:image" content="https://tieuhoc.hocmai.vn/truy-tim-kho-bau/assets/thumbnail.png" />
    <link rel="stylesheet" href="css/reset.css" type="text/css">
    <link rel="stylesheet" href="css/jquery.modal.min.css" />
    <link rel="stylesheet" href="css/main.css" type="text/css">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, minimal-ui" />
    <meta name="msapplication-tap-highlight" content="no" />

    <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="js/jquery.modal.min.js"></script>
    <script type="text/javascript" src="js/createjs.min.js"></script>
    <script type="text/javascript" src="js/howler.min.js"></script>
    <script type="text/javascript" src="js/screenfull.js"></script>
    <script type="text/javascript" src="js/ctl_utils.js"></script>
    <script type="text/javascript" src="js/sprite_lib.js"></script>
    <script type="text/javascript" src="js/settings.js"></script>
    <script type="text/javascript" src="js/DataHelper.js"></script>
    <script type="text/javascript" src="js/CPreloader.js"></script>
    <script type="text/javascript" src="js/CMain.js"></script>
    <script type="text/javascript" src="js/CText.js"></script>
    <script type="text/javascript" src="js/CTextButton.js"></script>
    <script type="text/javascript" src="js/CToggle.js"></script>
    <script type="text/javascript" src="js/CGfxButton.js"></script>
    <script type="text/javascript" src="js/CGImage.js"></script>
    <script type="text/javascript" src="js/Screen/ScreenHome.js"></script>
    <script type="text/javascript" src="js/Screen/ScreenChooseGame.js"></script>
    <script type="text/javascript" src="js/Screen/SmashTheMouse/SmashTheMouseScreen1.js"></script>
    <script type="text/javascript" src="js/Screen/SmashTheMouse/SmashTheMouseScreen2.js"></script>
    <script type="text/javascript" src="js/Screen/ChaseImageCaptureWord/ChaseImageCaptureWordScreen1.js"></script>
    <script type="text/javascript" src="js/Screen/ChaseImageCaptureWord/ChaseImageCaptureWordScreen2.js"></script>
    <script type="text/javascript" src="js/Screen/Game3/Game3Screen1.js"></script>
    <script type="text/javascript" src="js/Screen/Game3/Game3Screen2.js"></script>
    <script type="text/javascript" src="js/Screen/Game4/Game4Screen1.js"></script>
    <script type="text/javascript" src="js/Screen/Game4/Game4Screen2.js"></script>
    <script type="text/javascript" src="js/Panel/PausePanel.js"></script>
    <script type="text/javascript" src="js/Panel/PassPartPanel.js"></script>
    <script type="text/javascript" src="js/Panel/PassPartPanel2.js"></script>
    <script type="text/javascript" src="js/Panel/FailedPartPanel.js"></script>
    <script type="text/javascript" src="js/Panel/ScoreTotal.js"></script>
    <script type="text/javascript" src="js/GameInfo.js"></script>
    <script type="text/javascript" src="js/TimeProcess.js"></script>
    <script type="text/javascript" src="js/CCharacterInHole.js"></script>
    <script type="text/javascript" src="js/CCharacter.js"></script>
    <script type="text/javascript" src="js/CHammer.js"></script>

</head>

<body ondragstart="return false;" ondrop="return false;">
    <div id="thele" class="modal game_popup">
        <div class="modal_box">
            <h4>THỂ LỆ</h4>
            <div class="content-box">
                <div class="content">
                    <p>Để tham gia game "Truy tìm kho báu" và có cơ hội nhận học bổng từ HOCMAI, Quý phụ huynh – học sinh cần nắm rõ về thể lệ của chương trình. Cụ thể như sau:</p>
                    <strong>*Đối tượng tham gia:</strong>
                    <p>Tất cả học sinh từ lớp 1 – lớp 5 hoặc phụ huynh đang có con ở độ tuổi này.</p>
                    <strong>* Thời gian:</strong>
                    <p>Sự kiện sẽ diễn ra trong khoảng thời gian từ 1/7 – 30/7/2021	</p>
                    <strong>* Cách thức tham gia:</strong>
                    <p>Để tham gia chương trình, phụ huynh và học sinh làm theo các bước sau đây:	</p>
                    <ul>
                        <li>Bước 1: Truy cập vào trang  "Truy tìm kho báu"</li>
                        <li>Bước 2: Đăng ký và điền đầy đủ thông tin theo hướng dẫn</li>
                        <li>Bước 3: Kiểm tra và gửi thông tin</li>
                        <li>Bước 4: Hoàn thành các thử thách của chương trình</li>
                        <li>Bước 5: Theo dõi fanpage Hocmai.vn Tiểu học để biết kết quả</li>
                    </ul>
                    <strong>* Quà tặng:</strong>
                    <p>Tham gia sự kiện phụ huynh – học sinh sẽ có cơ hội nhận được những phần quà tặng hấp dẫn từ HOCMAI. Thông tin chi tiết về quà tặng như sau:</p>
                    <ul>
                        <li><strong>- 1 GIẢI CHIẾN BINH XUÂT SÁC:</strong>  Mỗi giải là 01 đồng hồ định vị trẻ em 4G trị giá 3 triệu đồng, và 01 khóa học online Tiểu học trong vòng 01 năm giành cho chiến binh đạt điểm số cao nhất trong thời gian ngắn nhất	</li>
                        <li><strong>- 5 Giải Chiến binh ƯU TÚ:</strong> Mỗi giải là 1 khoá học online Tiểu học trong vòng 12 tháng và 1 bộ sách nuôi dưỡng tâm hồn cho bé</li>
                        <li><strong>- 10 Giải Chiến binh Nỗ lực:</strong> Mỗi giải là 1 khoá học online Tiểu học trong vòng 6 tháng và 1 bộ sách nuôi dưỡng tâm hồn cho bé</li>
                        <li><strong>- 15 Giải Chiến binh chăm chỉ:</strong> mỗi giải là 1 bộ sách nuôi dưỡng tâm hồn cho bé</li>
                        <li><strong>- Và hàng ngàn giải thưởng:</strong> là 1 khoá học onine Tiểu học 1 tháng dành cho các bé tham gia game Truy tìm kho báu của Hocmai</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div id="registerPopup" class="modal game_popup">
        <div class="modal_box">
            <h4>BẠN CẦN ĐĂNG KÝ ĐỂ THAM GIA GAME</h4>
            <span style="display: block;">Bạn cần điền đầy đủ thông tin tại đây để bắt đầu tham gia trò chơi nhé:</span>
            <form action="" class="register-info">
                <input type="text" name="fullname" id="fullname" placeholder="Họ và tên">
                <span class="alert fullname">Hãy nhập tên của bạn</span>
                <input type="text" name="phone" id="phone" placeholder="Số điện thoại">
                <span class="alert phone">Hãy nhập tên của bạn</span>
                <select name="" id="class_id">
                    <option value="1">Lớp 1</option>
                    <option value="2">Lớp 2</option>
                    <option value="3">Lớp 3</option>
                    <option value="4">Lớp 4</option>
                    <option value="5">Lớp 5</option>
                </select>
                <span class="alert class_id">Hãy nhập tên của bạn</span>
            </form>
            <form action="" class="otp-form" style="display: none;">
                <span>Vui lòng nhập mã OTP để xác nhận đăng ký:</span>
                <input type="text" id="otp_code" placeholder="Mã OTP">
                <span class="alert otp_code">Hãy nhập tên của bạn</span>
                <span class="time_otp" style="display: none;">Thời gian nhập còn lại: <em>60</em> giây</span>
                <span class="otp_resend" style="display: none;">Không nhận được mã? <a id="resend_otp">Gửi lại</a></span>
            </form>
            <p class="chuy">* Khi bấm vào đăng ký tài khoản, bạn chắc chắn đã đọc và đồng ý với Chính sách bảo mật, Điều khoản dịch vụ và Chính sách tư vấn của HOCMAI.</p>
            <button class="register_btn">ĐĂNG KÝ</button>
            <button class="verifi_btn" style="display: none;">XÁC NHẬN</button>
        </div>
    </div>
    <div id="loginPopup" class="modal game_popup">
        <div class="modal_box">
            <h4>BẠN CẦN ĐĂNG NHẬP ĐỂ THAM GIA GAME</h4>
            <span>Vui lòng nhập số điện thoại</span>
            <form action="">
                <input type="text" name="phone" id="phone_2" placeholder="Số điện thoại">
                <span class="alert phone_2"></span>
            </form>
            <p class="chuy">Bạn chưa có tài khoản? Vui lòng <a href="#" class="btn_regiser_popup">Đăng ký tại đây</a></p>
            <button>ĐĂNG NHẬP</button>
        </div>
    </div>
    <div id="couponPopup" class="modal game_popup">
        <div class="modal_box">
            <h2>Mã khuyến mại của ba/mẹ/con là:</h2>
            <div class="content-box">
                <h5 class="coupon_code"></h5>
            </div>
            <!-- <span>Bấm đề copy</span> -->
            <input type="text" id="coupon_code_input" style="display: none">
        </div>
    </div>
    <div id="rankingPopup" class="modal game_popup">
        <div class="modal_box">
            <h4>BẢNG XẾP HẠNG</h4>
            <div class="content-box">
                <div class="content">
                    <table style="width: 100%;min-width: 500px;">
                        <thead>
                            <td width="50">HẠNG</td>
                            <td>HỌ TÊN</td>
                            <td width="100">SỐ ĐIỂM</td>
                            <td width="100">SĐT</td>
                            <td width="100">THỜI GIAN</td>
                        </thead>
                    </table>
                    <table style="width: 100%;min-width: 500px;" id="rankList">
                        <thead>
                            <td width="50"></td>
                            <td></td>
                            <td width="100"></td>
                            <td width="100"></td>
                            <td width="100"></td>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>Nguyễn Văn Bắc</td>
                                <td>100000</td>
                                <td>*******232</td>
                                <td>20:14</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div id="rotatescreen" class="modal game_popup">
        <div>
            <img src="./assets/rotatescreen.gif" alt="">
            <span>XOAY NGANG MÀN HÌNH ĐỂ TRẢI NGHIỆM TỐT HƠN</span>
        </div>
    </div>
    <div style="position: fixed; background-color: transparent; top: 0px; left: 0px; width: 100%; height: 100%"></div>
    <script>

        var userID = ''

        $(document).ready(function () {
            
            $('.coupon_code').click(function() {
                var copyText = document.getElementById("coupon_code_input");
                copyText.select();
                copyText.setSelectionRange(0, 99999);
                document.execCommand("copy");
                alert("Mẫ khuyến mại của bạn đã được copy");
            })

            $('.btn_regiser_popup').click(function() {
                $(".jquery-modal.blocker.current").trigger('click');
                $("#registerPopup").modal({
                    fadeDuration: 200
                })
            })

            function isVietnamesePhoneNumber(number) {
                return /(03|05|07|08|09|01[2|6|8|9])+([0-9]{8})\b/.test(number);
            }

            $('#resend_otp').click(function () {
                countDown()
                sendSms({
                    id: userID
                })
            })

            $('#registerPopup button.verifi_btn').click(function() {
                
            })

            $('#registerPopup form.otp-form').submit(function (e) {
                e.preventDefault()
                verifiOTPAction()
            })

            function verifiOTPAction() {
                if (userID) {
                    var otp_code = $('#otp_code').val()
                    checkOtp({
                        id: userID,
                        otp_code
                    }).then(function (res) {
                        $('.alert.otp_code').css('display', 'none')
                        if (res.code == 2) {
                            $('.alert.otp_code').html('Mã xác thực không đúng')
                            $('.alert.otp_code').css('display', 'block')
                        }

                        if (res.code == 1) {
                            localStorage.setItem('tieuhoc_game_key', userID)
                            IS_LOGIN = true;
                            $(".jquery-modal.blocker.current").trigger('click');
                            s_Home.unload()
                            _ScreenChooseGame = new ScreenChooseGame()
                        }
                    })
                }
            }

            $('#registerPopup button.register_btn').click(function() {
                registerAction()
            })

            $('#registerPopup form.register-info').submit(function (evt) {
                evt.preventDefault()
                registerAction()
            })

            function registerAction() {
                var fullname = $('#fullname').val()
                var phone = $('#phone').val()
                var class_id = $('#class_id').val()
                var error = false;

                if (fullname.trim() == '' || fullname.trim() == ' ') {
                    error = true
                    $('.alert.fullname').html('Hãy nhập tên của bạn !')
                    $('.alert.fullname').css('display', 'block')
                } else {
                    $('.alert.fullname').css('display', 'none')
                }
                
                if (phone.trim() == '' || phone.trim() == ' ') {
                    error = true
                    $('.alert.phone').html('Hãy nhập số điện thoại của bạn !')
                    $('.alert.phone').css('display', 'block')
                } else {
                    if (!isVietnamesePhoneNumber(phone.trim())) {
                        error = true
                        $('.alert.phone').html('Số điện thoại bạn nhập không hợp lệ !')
                        $('.alert.phone').css('display', 'block')
                    } else {
                        $('.alert.phone').css('display', 'none')
                    }
                }
                
                if (class_id.trim() == '' || class_id.trim() == ' ') {
                    error = true
                    $('.alert.class_id').html('Hãy chọn lớp đang học !')
                    $('.alert.class_id').css('display', 'block')
                } else {
                    $('.alert.class_id').css('display', 'none')
                }

                if (!error) {
                    register({fullname, phone, class_id}, function (res) {
                        if (res.code == 1) {
                            IS_LOGIN = true;
                            $(".jquery-modal.blocker.current").trigger('click');
                            s_Home.unload()
                            _ScreenChooseGame = new ScreenChooseGame()
                        }

                        if (res.code == 2) {
                            error = true
                            $('.alert.phone').html(res.message)
                            $('.alert.phone').css('display', 'block')
                        }
                        
                        if (res.code == 3) {
                            error = true
                            userID = res.data
                            $('.register-info').css('display', 'none')
                            $('.otp-form').css('display', 'block')
                            $('.time_otp').css('display', 'block')
                            $('#registerPopup button.verifi_btn').css('display', 'initial')
                            $('#registerPopup button.register_btn').css('display', 'none')
                            countDown()
                            sendSms({
                                id: userID
                            })
                        }
                    })
                } else {
                    return;
                }
            }

            function countDown () {
                var time = 60;
                
                $('.time_otp').css('display', 'block')
                $('.otp_resend').css('display', 'none')

                var coundDown = setInterval(function () {
                    time--;

                    $('.time_otp').css('display', 'block')
                    $('.otp_resend').css('display', 'none')
                    $('.time_otp em').html(time)
                    if (time <= 0) {
                        $('.time_otp').css('display', 'none')
                        $('.otp_resend').css('display', 'block')
                        clearInterval(coundDown)
                    }
                }, 1000)
            }

            $('#loginPopup button').click(function() {
                loginAction()
            })

            $('#loginPopup form').submit(function (e) {
                e.preventDefault()
                loginAction()
            })

            function loginAction() {
                var phone = $('#phone_2').val()
                var error = false;
                
                if (phone.trim() == '' || phone.trim() == ' ') {
                    error = true
                    $('.alert.phone_2').html('Hãy nhập số điện thoại của bạn !')
                    $('.alert.phone_2').css('display', 'block')
                } else {
                    if (!isVietnamesePhoneNumber(phone.trim())) {
                        error = true
                        $('.alert.phone_2').html('Số điện thoại bạn nhập không hợp lệ !')
                        $('.alert.phone_2').css('display', 'block')
                    } else {
                        $('.alert.phone_2').css('display', 'none')
                    }
                }
                
                if (!error) {
                    login({phone}, function (res) {
                        if (res.code == 1) {
                            IS_LOGIN = true;
                            $(".jquery-modal.blocker.current").trigger('click');
                            s_Home.unload()
                            _ScreenChooseGame = new ScreenChooseGame()
                        }
                        
                        if (res.code == 2) {
                            error = true
                            $('.alert.phone_2').html(res.message)
                            $('.alert.phone_2').css('display', 'block')
                        }

                        if (res.code == 3) {
                            $(".jquery-modal.blocker.current").trigger('click');
                            $("#registerPopup").modal({
                                fadeDuration: 200
                            })
                            userID = res.data
                            $('.register-info').css('display', 'none')
                            $('.otp-form').css('display', 'block')
                            $('.time_otp').css('display', 'block')
                            $('#registerPopup button.verifi_btn').css('display', 'initial')
                            $('#registerPopup button.register_btn').css('display', 'none')
                            countDown()
                            sendSms({
                                id: userID
                            })
                        }
                    })
                } else {
                    return;
                }
            }


            var oMain = new CMain({
                points: [10, 20, 30, -100], //POINTS ASSIGNED FOR EACH CHARACTER
                start_spawn_time: 1000,     //STARTING TIME INTERVAL FOR SPAWNING
                time_offset: 1000,          //TIME AMOUNT IN MILLISECONDS FOR INCREASE GAME DIFFICULTY
                offset_spawn_time: 10,      //THIS AMOUNT IS DECREASED FROM SPAWN TIME WHEN SCORE OFFSET IS REACHED
                super_hammer_time: 1500,    //IF 3 OR MORE MOLES ARE HIT DURING THIS TIME INTERVAL (MILLISECONDS TIME), SUPER HAMMER MULTIPLIER IS ASSIGNED
                super_hammer_mult: 2,       //EACH MOLE SCORE IS MULTIPLIED FOR THIS AMOUNT WHEN GAME IS IN SUPER HAMMER MODE
                time_super_hammer: 10000,  //TIME DURATION IN MILLISECONDS OF SUPERHAMMER MULTIPLIER
                level_time: 60000,          //TIME (IN MILLISECONDS) FOR LEVEL
                fullscreen: true            //SET THIS TO FALSE IF YOU DON'T WANT TO SHOW FULLSCREEN BUTTON
            });


            $(oMain).on("start_session", function (evt) {

            });

            $(oMain).on("end_session", function (evt) {

            });

            $(oMain).on("save_score", function (evt, iScore) {

            });

            $(oMain).on("share_event", function (evt, iScore) {

                //...ADD YOUR CODE HERE EVENTUALLY
            });

            if (isIOS()) {
                setTimeout(function () { sizeHandler(); }, 200);
            } else {
                sizeHandler();
            }
        });

    </script>
    <div class="check-fonts">
        <p class="check-font-1">test 1</p>
    </div>

    <canvas id="canvas" class='ani_hack' width="1920" height="1920"> </canvas>
    <div id="block_game"
        style="position: fixed; background-color: transparent; top: 0px; left: 0px; width: 100%; height: 100%; display:none">
    </div>
</body>

</html>